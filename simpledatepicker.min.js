var simpleDatePicker=function(){class e{constructor(e,t={}){this.selector=e,this.element=document.querySelector(this.selector),this.activeDay=t.activeDay?t.activeDay:(new Date).getDate(),this.activeMonth=t.activeMonth?t.activeMonth-1:(new Date).getMonth(),this.activeYear=t.activeYear?t.activeYear:(new Date).getFullYear(),this.daysInMonth=this.getDaysInMonth(this.activeMonth,this.activeYear),this.maxYears=t.maxYears?t.maxYears:3,this.maxDays=t.maxDays?t.maxDays:5,this.allowPrevDate=t.allowPrevDate?t.allowPrevDate:"true",this.showArrows=t.showArrows?t.showArrows:"true",this.arrowHtml=t.arrowHtml?t.arrowHtml:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 330 330" xml:space="preserve"><path id="XMLID_222_" d="M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001 c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213 C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606 C255,161.018,253.42,157.202,250.606,154.389z"/></svg>',this.datePattern=t.datePattern?t.datePattern:"YYYY/MM/DD",this.langLocale=t.langLocale?t.langLocale:"default",this.inputType=t.inputType?t.inputType:"hidden",this.inputId=t.inputId?t.inputId:"selectedDate",this.liWidth="100%",this.currentDay=(new Date).getDate(),this.currentMonth=(new Date).getMonth(),this.currentYear=(new Date).getFullYear(),this.mouseMoveListener=null,this.mouseDownListener=null,this.mouseUpListener=null,this.mouseLeaveListener=null,this.init()}createSimpleDatePicker(e){const t=document.createElement("div");t.classList.add("simpleDatePicker");const s=document.createElement("div"),a=document.createElement("ul");s.classList.add("years"),"true"==this.showArrows&&this.drawArrow(s,"prev"),s.appendChild(a),"true"==this.showArrows&&this.drawArrow(s,"next"),a.appendChild(this.drawYear()),t.appendChild(s);const i=document.createElement("div"),r=document.createElement("ul");i.classList.add("months"),"true"==this.showArrows&&this.drawArrow(i,"prev"),i.appendChild(r),"true"==this.showArrows&&this.drawArrow(i,"next"),r.appendChild(this.drawMonth(this.activeMonth)),t.appendChild(i);const n=document.createElement("div"),l=document.createElement("ul");n.classList.add("days"),"true"==this.showArrows&&this.drawArrow(n,"prev"),n.appendChild(l),"true"==this.showArrows&&this.drawArrow(n,"next"),l.appendChild(this.drawDayList(this.activeDay,this.daysInMonth)),t.appendChild(n),e.appendChild(t),this.daysView(),setTimeout(()=>{this.element.querySelectorAll(".days ul li").forEach(e=>{e.classList.add("anim")})},100);const o=document.createElement("input");o.setAttribute("type",this.inputType),o.setAttribute("id",this.inputId);const h=new Date(this.activeYear,this.activeMonth,this.activeDay);o.value=this.formatDate(h,this.datePattern),e.appendChild(o)}getDaysInMonth(e,t){return new Date(t,e+1,0).getDate()}getMonthName(e,t="default"){const s=new Date;return s.setMonth(e-1),new Intl.DateTimeFormat(t,{month:"long"}).format(s)}drawYear(){const e="true"==this.allowPrevDate?this.activeYear-this.maxYears:this.currentYear,t=this.activeYear+this.maxYears+1,s=document.createDocumentFragment();for(let a=e;a<t;a++){const e=document.createElement("li");e.classList.add("year"),a==this.activeYear&&e.classList.add("active"),e.innerHTML="<span>"+a+"</span>",s.appendChild(e)}return s}drawMonth(e){const t=document.createDocumentFragment();for(let s=1;s<13;s++){const a=document.createElement("li");a.classList.add("month"),s-1==e&&a.classList.add("active"),a.innerHTML="<span>"+this.getMonthName(s,this.langLocale)+"</span>",t.appendChild(a)}return t}drawDayList(e,t){const s=document.createDocumentFragment();for(let a=1;a<=t;a++){const t=document.createElement("li");t.classList.add("day"),t.setAttribute("data-day",a),a==e&&t.classList.add("active"),t.innerHTML="<span>"+a+"</span>",s.appendChild(t)}return s}drawDays(){const e=this.element.querySelector(".years li.active").textContent.trim(),t=Array.from(this.element.querySelectorAll(".months ul li")).findIndex(e=>e.classList.contains("active")),s=this.daysInMonth=this.getDaysInMonth(t,e),a=this.element.querySelector(".days li.active").textContent.trim();let i=a>s?s:a;"true"!=this.allowPrevDate&&this.isSameYear()&&this.isSameMonth()&&parseInt(a)<parseInt(this.currentDay)&&(i=this.currentDay);const r=this.element.querySelector(".days ul");for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(this.drawDayList(i,s)),this.element.querySelectorAll(".days ul li").forEach(e=>{e.classList.remove("anim")}),this.daysView(),setTimeout(()=>{this.element.querySelectorAll(".days ul li").forEach(e=>{e.classList.add("anim")})},100),this.eventDragListeners()}daysView(){const e=Array.from(this.element.querySelectorAll(".days ul li")).findIndex(e=>e.classList.contains("active")),t=this.element.querySelector(".days ul").getBoundingClientRect().width,s=e-Math.floor(this.maxDays/2);this.liWidth=t/this.maxDays,this.element.querySelectorAll(".days ul li").forEach(e=>{e.style.width=this.liWidth+"px",e.style.transform="translateX("+-1*this.liWidth*s+"px)"})}drawArrow(e,t){const s=this.arrowHtml,a=document.createElement("div");a.classList.add("arrow"),a.classList.add("arrow-"+t),a.innerHTML=s,e.appendChild(a)}formatDate(e,t){const s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return t.replace(/YYYY/,s).replace(/MM/,a).replace(/DD/,i)}prevEl(e,t){return e>t?e-1:t}nextEl(e,t){return e<t?e+1:t}changeYear(e){const t=Array.from(this.element.querySelectorAll(".years ul li")),s=t.findIndex(e=>e.classList.contains("active")),a=t.findIndex(e=>e.textContent.trim()==this.currentYear);t[s].classList.remove("active");const i="true"==this.allowPrevDate?a-this.maxYears:a;if(0==e?t[this.prevEl(s,i)].classList.add("active"):t[this.nextEl(s,a+this.maxYears)].classList.add("active"),"true"!=this.allowPrevDate&&0==e&&this.isSameYear()){if(Array.from(this.element.querySelectorAll(".months ul li")).findIndex(e=>e.classList.contains("active"))<this.currentMonth){const e=this.element.querySelector(".months ul");for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(this.drawMonth(this.currentMonth))}}this.drawDays(),this.selectedDateValue(this.element)}changeMonth(e){const t=Array.from(this.element.querySelectorAll(".months ul li")),s=t.findIndex(e=>e.classList.contains("active"));"true"!=this.allowPrevDate&&0==e&&this.isSameYear()&&this.isSameMonth()||(t[s].classList.remove("active"),0==e?t[this.prevEl(s,0)].classList.add("active"):t[this.nextEl(s,11)].classList.add("active"),this.drawDays(),this.selectedDateValue(this.element))}changeDay(e){const t=Array.from(this.element.querySelectorAll(".days ul li")),s=t.findIndex(e=>e.classList.contains("active"));if(!("true"!=this.allowPrevDate&&0==e&&this.isSameYear()&&this.isSameMonth()&&this.isSameDay())){t[s].classList.remove("active"),0==e?t[this.prevEl(s,0)].classList.add("active"):t[this.nextEl(s,this.daysInMonth-1)].classList.add("active");const a=0==e?this.prevEl(s,0)-Math.floor(this.maxDays/2):this.nextEl(s,this.daysInMonth-1)-Math.floor(this.maxDays/2);this.element.querySelectorAll(".days ul li").forEach(e=>{e.style.transform="translateX("+-1*this.liWidth*a+"px)"}),this.selectedDateValue(this.element)}}isSameYear(){return this.element.querySelector(".years ul li.active").textContent.trim()==this.currentYear}isSameMonth(){return this.element.querySelector(".months ul li.active").textContent.trim()==this.getMonthName(this.currentMonth+1,this.langLocale)}isSameDay(){return this.element.querySelector(".days ul li.active").textContent.trim()==this.currentDay}selectedDateValue(e){const t=e.querySelector(".years ul li.active").textContent.trim(),s=Array.from(e.querySelectorAll(".months ul li")).findIndex(e=>e.classList.contains("active")),a=e.querySelector(".days ul li.active").textContent.trim(),i=new Date(t,s,a);e.querySelector("input").value=this.formatDate(i,this.datePattern)}snapToClosestDay(e,t,s,a){let i=null,r=1/0;const n=t.parentElement.getBoundingClientRect(),l=n.left+n.width/2;if(s.forEach(e=>{const t=e.getBoundingClientRect(),s=Math.abs(t.left+t.width/2-l);s<r&&(r=s,i=e)}),i){const e=l-i.getBoundingClientRect().left-i.offsetWidth/2;a+=e,s.forEach(e=>{e.style.transform=`translateX(${a}px)`}),i.classList.add("active"),s.forEach(e=>{e!==i&&e.classList.remove("active")}),this.selectedDateValue(this.element)}}eventDragListeners(){const e=document.querySelector(".days ul"),t=[...e.children];let s=!1,a=0,i=0,r=0;this.mouseDownListener=(n=>{s=!0,a=n.pageX,r=function(e){const t=window.getComputedStyle(e[0]);return new DOMMatrix(t.transform).m41||0}(t),e.style.cursor="grabbing",e.classList.add("dragging"),this.mouseMoveListener=(e=>{if(!s)return;e.preventDefault();const n=e.pageX-a;i=r+n,t.forEach(e=>{e.style.transform=`translateX(${i}px)`})}),e.addEventListener("mousemove",this.mouseMoveListener)}),e.addEventListener("mousedown",this.mouseDownListener),this.mouseLeaveListener=(a=>{s&&(s=!1,this.snapToClosestDay(this.element,e,t,i),e.removeEventListener("mousemove",this.mouseMoveListener))}),e.addEventListener("mouseleave",this.mouseLeaveListener),this.mouseUpListener=(a=>{s&&(s=!1,e.style.cursor="grab",e.classList.remove("dragging"),this.snapToClosestDay(this.element,e,t,i),e.removeEventListener("mousemove",this.mouseMoveListener))}),e.addEventListener("mouseup",this.mouseUpListener)}init(){this.createSimpleDatePicker(this.element),"true"==this.showArrows&&(this.element.querySelector(".years .arrow-prev").addEventListener("click",()=>this.changeYear(0)),this.element.querySelector(".years .arrow-next").addEventListener("click",()=>this.changeYear(1)),this.element.querySelector(".months .arrow-prev").addEventListener("click",()=>this.changeMonth(0)),this.element.querySelector(".months .arrow-next").addEventListener("click",()=>this.changeMonth(1)),this.element.querySelector(".days .arrow-prev").addEventListener("click",()=>this.changeDay(0)),this.element.querySelector(".days .arrow-next").addEventListener("click",()=>this.changeDay(1))),this.eventDragListeners()}}return e}();